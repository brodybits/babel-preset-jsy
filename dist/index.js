'use strict';

const bps_env = require('babel-preset-env').default;
const bps_stage_3 = require('babel-preset-stage-3');
const bpi_offside_js = require('babel-plugin-offside-js');
const bpi_class_props = require('babel-plugin-transform-class-properties');
const bpi_async_gen_fns = require('babel-plugin-transform-async-generator-functions');

module.exports = exports = function preset(context, opts = {}) {
  const opts_stage_3 = 'stage_3' in opts ? opts.stage_3 : !opts.no_stage_3;
  delete opts.stage_3;delete opts.no_stage_3;
  const opts_offside = opts.offside;
  delete opts.offside;

  if (!opts.targets) {
    opts.targets = { node: 'current' };
  }

  if (true === opts.targets.browser) {
    opts.targets.browser = 'last 1 versions, > 2% in US';
  }

  let presets = [],
      plugins = [];

  presets.push([bps_env, opts]);
  if (opts_stage_3) {
    presets.push([bps_stage_3]);
  } else {
    // However, generator async * functions should still be supported
    plugins.push([bpi_async_gen_fns]);
  }

  plugins.push([bpi_class_props]);
  plugins.push([bpi_offside_js, opts_offside]);

  return { presets, plugins };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NvZGUvaW5kZXguanMiXSwibmFtZXMiOlsiYnBzX2VudiIsInJlcXVpcmUiLCJkZWZhdWx0IiwiYnBzX3N0YWdlXzMiLCJicGlfb2Zmc2lkZV9qcyIsImJwaV9jbGFzc19wcm9wcyIsImJwaV9hc3luY19nZW5fZm5zIiwibW9kdWxlIiwiZXhwb3J0cyIsInByZXNldCIsImNvbnRleHQiLCJvcHRzIiwib3B0c19zdGFnZV8zIiwic3RhZ2VfMyIsIm5vX3N0YWdlXzMiLCJvcHRzX29mZnNpZGUiLCJvZmZzaWRlIiwidGFyZ2V0cyIsIm5vZGUiLCJicm93c2VyIiwicHJlc2V0cyIsInBsdWdpbnMiLCJwdXNoIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFVBQVVDLFFBQVEsa0JBQVIsRUFBNEJDLE9BQTVDO0FBQ0EsTUFBTUMsY0FBY0YsUUFBUSxzQkFBUixDQUFwQjtBQUNBLE1BQU1HLGlCQUFpQkgsUUFBUSx5QkFBUixDQUF2QjtBQUNBLE1BQU1JLGtCQUFrQkosUUFBUSx5Q0FBUixDQUF4QjtBQUNBLE1BQU1LLG9CQUFvQkwsUUFBUSxrREFBUixDQUExQjs7QUFFQU0sT0FBT0MsT0FBUCxHQUFpQkEsVUFBVSxTQUFTQyxNQUFULENBQWdCQyxPQUFoQixFQUF5QkMsT0FBSyxFQUE5QixFQUFrQztBQUMzRCxRQUFNQyxlQUFlLGFBQWFELElBQWIsR0FBb0JBLEtBQUtFLE9BQXpCLEdBQW1DLENBQUNGLEtBQUtHLFVBQTlEO0FBQ0EsU0FBT0gsS0FBS0UsT0FBWixDQUFxQixPQUFPRixLQUFLRyxVQUFaO0FBQ3JCLFFBQU1DLGVBQWVKLEtBQUtLLE9BQTFCO0FBQ0EsU0FBT0wsS0FBS0ssT0FBWjs7QUFFQSxNQUFHLENBQUNMLEtBQUtNLE9BQVQsRUFBbUI7QUFDakJOLFNBQUtNLE9BQUwsR0FBZSxFQUFJQyxNQUFNLFNBQVYsRUFBZjtBQUFrQzs7QUFFcEMsTUFBRyxTQUFTUCxLQUFLTSxPQUFMLENBQWFFLE9BQXpCLEVBQW1DO0FBQ2pDUixTQUFLTSxPQUFMLENBQWFFLE9BQWIsR0FBdUIsNkJBQXZCO0FBQW9EOztBQUV0RCxNQUFJQyxVQUFVLEVBQWQ7QUFBQSxNQUFrQkMsVUFBVSxFQUE1Qjs7QUFFQUQsVUFBUUUsSUFBUixDQUFlLENBQUV0QixPQUFGLEVBQVdXLElBQVgsQ0FBZjtBQUNBLE1BQUdDLFlBQUgsRUFBa0I7QUFDaEJRLFlBQVFFLElBQVIsQ0FBZSxDQUFFbkIsV0FBRixDQUFmO0FBQThCLEdBRGhDLE1BRUs7QUFDSDtBQUNBa0IsWUFBUUMsSUFBUixDQUFlLENBQUVoQixpQkFBRixDQUFmO0FBQW9DOztBQUV0Q2UsVUFBUUMsSUFBUixDQUFlLENBQUVqQixlQUFGLENBQWY7QUFDQWdCLFVBQVFDLElBQVIsQ0FBZSxDQUFFbEIsY0FBRixFQUFrQlcsWUFBbEIsQ0FBZjs7QUFFQSxTQUFPLEVBQUlLLE9BQUosRUFBYUMsT0FBYixFQUFQO0FBQTJCLENBeEI3QiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJwc19lbnYgPSByZXF1aXJlKCdiYWJlbC1wcmVzZXQtZW52JykuZGVmYXVsdFxuY29uc3QgYnBzX3N0YWdlXzMgPSByZXF1aXJlKCdiYWJlbC1wcmVzZXQtc3RhZ2UtMycpXG5jb25zdCBicGlfb2Zmc2lkZV9qcyA9IHJlcXVpcmUoJ2JhYmVsLXBsdWdpbi1vZmZzaWRlLWpzJylcbmNvbnN0IGJwaV9jbGFzc19wcm9wcyA9IHJlcXVpcmUoJ2JhYmVsLXBsdWdpbi10cmFuc2Zvcm0tY2xhc3MtcHJvcGVydGllcycpXG5jb25zdCBicGlfYXN5bmNfZ2VuX2ZucyA9IHJlcXVpcmUoJ2JhYmVsLXBsdWdpbi10cmFuc2Zvcm0tYXN5bmMtZ2VuZXJhdG9yLWZ1bmN0aW9ucycpXG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGZ1bmN0aW9uIHByZXNldChjb250ZXh0LCBvcHRzPXt9KSA6OlxuICBjb25zdCBvcHRzX3N0YWdlXzMgPSAnc3RhZ2VfMycgaW4gb3B0cyA/IG9wdHMuc3RhZ2VfMyA6ICFvcHRzLm5vX3N0YWdlXzNcbiAgZGVsZXRlIG9wdHMuc3RhZ2VfMzsgZGVsZXRlIG9wdHMubm9fc3RhZ2VfMzsgXG4gIGNvbnN0IG9wdHNfb2Zmc2lkZSA9IG9wdHMub2Zmc2lkZVxuICBkZWxldGUgb3B0cy5vZmZzaWRlXG5cbiAgaWYgIW9wdHMudGFyZ2V0cyA6OlxuICAgIG9wdHMudGFyZ2V0cyA9IEB7fSBub2RlOiAnY3VycmVudCdcblxuICBpZiB0cnVlID09PSBvcHRzLnRhcmdldHMuYnJvd3NlciA6OlxuICAgIG9wdHMudGFyZ2V0cy5icm93c2VyID0gJ2xhc3QgMSB2ZXJzaW9ucywgPiAyJSBpbiBVUydcblxuICBsZXQgcHJlc2V0cyA9IFtdLCBwbHVnaW5zID0gW11cblxuICBwcmVzZXRzLnB1c2ggQCBbIGJwc19lbnYsIG9wdHMgXVxuICBpZiBvcHRzX3N0YWdlXzMgOjpcbiAgICBwcmVzZXRzLnB1c2ggQCBbIGJwc19zdGFnZV8zIF1cbiAgZWxzZSA6OlxuICAgIC8vIEhvd2V2ZXIsIGdlbmVyYXRvciBhc3luYyAqIGZ1bmN0aW9ucyBzaG91bGQgc3RpbGwgYmUgc3VwcG9ydGVkXG4gICAgcGx1Z2lucy5wdXNoIEAgWyBicGlfYXN5bmNfZ2VuX2ZucyBdXG5cbiAgcGx1Z2lucy5wdXNoIEAgWyBicGlfY2xhc3NfcHJvcHMgXVxuICBwbHVnaW5zLnB1c2ggQCBbIGJwaV9vZmZzaWRlX2pzLCBvcHRzX29mZnNpZGUgXVxuXG4gIHJldHVybiBAe30gcHJlc2V0cywgcGx1Z2luc1xuXG4iXX0=