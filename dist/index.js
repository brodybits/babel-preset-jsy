'use strict';

const bps_env = require('babel-preset-env').default;
const bps_stage_3 = require('babel-preset-stage-3');
const bpi_offside_js = require('babel-plugin-offside-js');
const bpi_class_props = require('babel-plugin-transform-class-properties');

module.exports = exports = function preset(context, opts = {}) {
  const opts_stage_3 = !opts.no_stage_3;
  const opts_offside = opts.offside;
  delete opts.offside;

  if (!opts.targets) {
    opts.targets = { node: 'current' };
  }

  if (true === opts.targets.browser) {
    opts.targets.browser = 'last 1 versions, > 2% in US';
  }

  let presets = [],
      plugins = [];

  presets.push([bps_env, opts]);
  if (opts_stage_3) {
    presets.push([bps_stage_3]);
  }

  plugins.push([bpi_class_props]);
  plugins.push([bpi_offside_js, opts_offside]);

  return { presets, plugins };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NvZGUvaW5kZXguanMiXSwibmFtZXMiOlsiYnBzX2VudiIsInJlcXVpcmUiLCJkZWZhdWx0IiwiYnBzX3N0YWdlXzMiLCJicGlfb2Zmc2lkZV9qcyIsImJwaV9jbGFzc19wcm9wcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJwcmVzZXQiLCJjb250ZXh0Iiwib3B0cyIsIm9wdHNfc3RhZ2VfMyIsIm5vX3N0YWdlXzMiLCJvcHRzX29mZnNpZGUiLCJvZmZzaWRlIiwidGFyZ2V0cyIsIm5vZGUiLCJicm93c2VyIiwicHJlc2V0cyIsInBsdWdpbnMiLCJwdXNoIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFVBQVVDLFFBQVEsa0JBQVIsRUFBNEJDLE9BQTVDO0FBQ0EsTUFBTUMsY0FBY0YsUUFBUSxzQkFBUixDQUFwQjtBQUNBLE1BQU1HLGlCQUFpQkgsUUFBUSx5QkFBUixDQUF2QjtBQUNBLE1BQU1JLGtCQUFrQkosUUFBUSx5Q0FBUixDQUF4Qjs7QUFFQUssT0FBT0MsT0FBUCxHQUFpQkEsVUFBVSxTQUFTQyxNQUFULENBQWdCQyxPQUFoQixFQUF5QkMsT0FBSyxFQUE5QixFQUFrQztBQUMzRCxRQUFNQyxlQUFlLENBQUVELEtBQUtFLFVBQTVCO0FBQ0EsUUFBTUMsZUFBZUgsS0FBS0ksT0FBMUI7QUFDQSxTQUFPSixLQUFLSSxPQUFaOztBQUVBLE1BQUcsQ0FBQ0osS0FBS0ssT0FBVCxFQUFtQjtBQUNqQkwsU0FBS0ssT0FBTCxHQUFlLEVBQUlDLE1BQU0sU0FBVixFQUFmO0FBQWtDOztBQUVwQyxNQUFHLFNBQVNOLEtBQUtLLE9BQUwsQ0FBYUUsT0FBekIsRUFBbUM7QUFDakNQLFNBQUtLLE9BQUwsQ0FBYUUsT0FBYixHQUF1Qiw2QkFBdkI7QUFBb0Q7O0FBRXRELE1BQUlDLFVBQVUsRUFBZDtBQUFBLE1BQWtCQyxVQUFVLEVBQTVCOztBQUVBRCxVQUFRRSxJQUFSLENBQWUsQ0FBRXBCLE9BQUYsRUFBV1UsSUFBWCxDQUFmO0FBQ0EsTUFBR0MsWUFBSCxFQUFrQjtBQUNoQk8sWUFBUUUsSUFBUixDQUFlLENBQUVqQixXQUFGLENBQWY7QUFBOEI7O0FBRWhDZ0IsVUFBUUMsSUFBUixDQUFlLENBQUVmLGVBQUYsQ0FBZjtBQUNBYyxVQUFRQyxJQUFSLENBQWUsQ0FBRWhCLGNBQUYsRUFBa0JTLFlBQWxCLENBQWY7O0FBRUEsU0FBTyxFQUFJSyxPQUFKLEVBQWFDLE9BQWIsRUFBUDtBQUEyQixDQXBCN0IiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBicHNfZW52ID0gcmVxdWlyZSgnYmFiZWwtcHJlc2V0LWVudicpLmRlZmF1bHRcbmNvbnN0IGJwc19zdGFnZV8zID0gcmVxdWlyZSgnYmFiZWwtcHJlc2V0LXN0YWdlLTMnKVxuY29uc3QgYnBpX29mZnNpZGVfanMgPSByZXF1aXJlKCdiYWJlbC1wbHVnaW4tb2Zmc2lkZS1qcycpXG5jb25zdCBicGlfY2xhc3NfcHJvcHMgPSByZXF1aXJlKCdiYWJlbC1wbHVnaW4tdHJhbnNmb3JtLWNsYXNzLXByb3BlcnRpZXMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBmdW5jdGlvbiBwcmVzZXQoY29udGV4dCwgb3B0cz17fSkgOjpcbiAgY29uc3Qgb3B0c19zdGFnZV8zID0gISBvcHRzLm5vX3N0YWdlXzNcbiAgY29uc3Qgb3B0c19vZmZzaWRlID0gb3B0cy5vZmZzaWRlXG4gIGRlbGV0ZSBvcHRzLm9mZnNpZGVcblxuICBpZiAhb3B0cy50YXJnZXRzIDo6XG4gICAgb3B0cy50YXJnZXRzID0gQHt9IG5vZGU6ICdjdXJyZW50J1xuXG4gIGlmIHRydWUgPT09IG9wdHMudGFyZ2V0cy5icm93c2VyIDo6XG4gICAgb3B0cy50YXJnZXRzLmJyb3dzZXIgPSAnbGFzdCAxIHZlcnNpb25zLCA+IDIlIGluIFVTJ1xuXG4gIGxldCBwcmVzZXRzID0gW10sIHBsdWdpbnMgPSBbXVxuXG4gIHByZXNldHMucHVzaCBAIFsgYnBzX2Vudiwgb3B0cyBdXG4gIGlmIG9wdHNfc3RhZ2VfMyA6OlxuICAgIHByZXNldHMucHVzaCBAIFsgYnBzX3N0YWdlXzMgXVxuXG4gIHBsdWdpbnMucHVzaCBAIFsgYnBpX2NsYXNzX3Byb3BzIF1cbiAgcGx1Z2lucy5wdXNoIEAgWyBicGlfb2Zmc2lkZV9qcywgb3B0c19vZmZzaWRlIF1cblxuICByZXR1cm4gQHt9IHByZXNldHMsIHBsdWdpbnNcblxuIl19